EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:recom_r78
LIBS:LM431
LIBS:+11
LIBS:max3232
LIBS:nlas4684
LIBS:Aerostat REV D-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 2 4
Title "Aerostat Control Board"
Date "2017-09-07"
Rev "C"
Comp "University of Toledo 3MDL"
Comment1 "*NOTE: uMCA refers to RGB+3 model"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text GLabel 9500 3800 2    47   Input ~ 0
AVR_RST
$Comp
L C C5
U 1 1 5953F449
P 7350 2500
F 0 "C5" H 7375 2600 50  0000 L CNN
F 1 "1uF" H 7375 2400 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 7388 2350 50  0001 C CNN
F 3 "" H 7350 2500 50  0000 C CNN
	1    7350 2500
	-1   0    0    -1  
$EndComp
$Comp
L GND #PWR01
U 1 1 5953F450
P 7350 2750
F 0 "#PWR01" H 7350 2500 50  0001 C CNN
F 1 "GND" H 7350 2600 50  0000 C CNN
F 2 "" H 7350 2750 50  0000 C CNN
F 3 "" H 7350 2750 50  0000 C CNN
	1    7350 2750
	-1   0    0    -1  
$EndComp
$Comp
L FT230XQ-R U2
U 1 1 5953FE3D
P 5300 2200
F 0 "U2" H 5000 2050 60  0000 C CNN
F 1 "FT230XQ-R" H 5300 850 60  0000 C CNN
F 2 "Housings_DFN_QFN:QFN-16-1EP_4x4mm_Pitch0.65mm" H 5300 2200 60  0001 C CNN
F 3 "" H 5300 2200 60  0001 C CNN
	1    5300 2200
	1    0    0    -1  
$EndComp
Text GLabel 6000 2600 2    47   Input ~ 0
RX_FTDI
Text GLabel 6000 2500 2    47   Output ~ 0
TX_FTDI
$Comp
L USB_OTG-RESCUE-Aerostat_REV_A P1
U 1 1 5953FE48
P 3900 2700
F 0 "P1" H 4225 2575 50  0000 C CNN
F 1 "USB_OTG" H 3900 2900 50  0000 C CNN
F 2 "MOD:UX60-MB-5ST" V 3850 2600 50  0001 C CNN
F 3 "" V 3850 2600 50  0000 C CNN
	1    3900 2700
	0    -1   1    0   
$EndComp
$Comp
L R R2
U 1 1 5953FE4F
P 4450 2600
F 0 "R2" V 4300 2600 50  0000 C CNN
F 1 "22" V 4450 2600 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 4380 2600 50  0001 C CNN
F 3 "" H 4450 2600 50  0000 C CNN
	1    4450 2600
	0    1    1    0   
$EndComp
$Comp
L R R3
U 1 1 5953FE56
P 4450 2700
F 0 "R3" V 4550 2700 50  0000 C CNN
F 1 "22" V 4450 2700 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 4380 2700 50  0001 C CNN
F 3 "" H 4450 2700 50  0000 C CNN
	1    4450 2700
	0    1    1    0   
$EndComp
NoConn ~ 4200 2800
$Comp
L GND #PWR02
U 1 1 5953FE72
P 3800 3200
F 0 "#PWR02" H 3800 2950 50  0001 C CNN
F 1 "GND" H 3800 3050 50  0000 C CNN
F 2 "" H 3800 3200 50  0000 C CNN
F 3 "" H 3800 3200 50  0000 C CNN
	1    3800 3200
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR03
U 1 1 5953FE78
P 4200 3000
F 0 "#PWR03" H 4200 2750 50  0001 C CNN
F 1 "GND" H 4200 2850 50  0000 C CNN
F 2 "" H 4200 3000 50  0000 C CNN
F 3 "" H 4200 3000 50  0000 C CNN
	1    4200 3000
	1    0    0    -1  
$EndComp
$Comp
L C C2
U 1 1 5953FE80
P 4500 3200
F 0 "C2" H 4525 3300 50  0000 L CNN
F 1 "1uF" H 4525 3100 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 4538 3050 50  0001 C CNN
F 3 "" H 4500 3200 50  0000 C CNN
	1    4500 3200
	-1   0    0    -1  
$EndComp
$Comp
L GND #PWR04
U 1 1 5953FE8B
P 4700 3500
F 0 "#PWR04" H 4700 3250 50  0001 C CNN
F 1 "GND" H 4700 3350 50  0000 C CNN
F 2 "" H 4700 3500 50  0000 C CNN
F 3 "" H 4700 3500 50  0000 C CNN
	1    4700 3500
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR05
U 1 1 5953FE93
P 4500 3450
F 0 "#PWR05" H 4500 3200 50  0001 C CNN
F 1 "GND" H 4500 3300 50  0000 C CNN
F 2 "" H 4500 3450 50  0000 C CNN
F 3 "" H 4500 3450 50  0000 C CNN
	1    4500 3450
	1    0    0    -1  
$EndComp
$Comp
L C C4
U 1 1 5953FE9A
P 6150 2750
F 0 "C4" V 6200 2600 50  0000 L CNN
F 1 "0.1uF" V 6200 2800 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 6188 2600 50  0001 C CNN
F 3 "" H 6150 2750 50  0000 C CNN
	1    6150 2750
	0    1    1    0   
$EndComp
NoConn ~ 5900 2850
NoConn ~ 5900 3000
NoConn ~ 5900 3100
NoConn ~ 5900 3200
NoConn ~ 5900 3300
Text GLabel 6400 2750 2    60   Output ~ 0
AVR_RST
$Comp
L CONN_02X03 P2
U 1 1 595402A1
P 4350 4650
F 0 "P2" H 4350 4850 50  0000 C CNN
F 1 "ICSP" H 4350 4450 50  0000 C CNN
F 2 "MOD:2.54 ICSP" H 4350 3450 50  0001 C CNN
F 3 "" H 4350 3450 50  0000 C CNN
	1    4350 4650
	1    0    0    -1  
$EndComp
Text GLabel 4000 4550 0    47   BiDi ~ 0
MISO
Text GLabel 4000 4650 0    47   Output ~ 0
SCK
Text GLabel 4000 4750 0    47   Output ~ 0
AVR_RST
Text GLabel 4700 4650 2    47   BiDi ~ 0
MOSI
$Comp
L +3.3V #PWR06
U 1 1 595402AC
P 4600 4450
F 0 "#PWR06" H 4600 4300 50  0001 C CNN
F 1 "+3.3V" H 4600 4590 50  0000 C CNN
F 2 "" H 4600 4450 50  0000 C CNN
F 3 "" H 4600 4450 50  0000 C CNN
	1    4600 4450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR07
U 1 1 595402B2
P 4600 4850
F 0 "#PWR07" H 4600 4600 50  0001 C CNN
F 1 "GND" H 4600 4700 50  0000 C CNN
F 2 "" H 4600 4850 50  0000 C CNN
F 3 "" H 4600 4850 50  0000 C CNN
	1    4600 4850
	1    0    0    -1  
$EndComp
$Comp
L C C3
U 1 1 5954AA07
P 4700 2250
F 0 "C3" H 4725 2350 50  0000 L CNN
F 1 "1uF" H 4725 2150 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 4738 2100 50  0001 C CNN
F 3 "" H 4700 2250 50  0000 C CNN
	1    4700 2250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR08
U 1 1 5954AA6E
P 4700 2000
F 0 "#PWR08" H 4700 1750 50  0001 C CNN
F 1 "GND" H 4700 1850 50  0000 C CNN
F 2 "" H 4700 2000 50  0000 C CNN
F 3 "" H 4700 2000 50  0000 C CNN
	1    4700 2000
	-1   0    0    1   
$EndComp
Text Label 4700 2700 2    47   ~ 0
D2+
Text Label 4700 2600 2    47   ~ 0
D2-
Text Label 4300 2600 2    47   ~ 0
D1-
Text Label 4300 2700 2    47   ~ 0
D1+
Wire Wire Line
	7350 2750 7350 2650
Wire Wire Line
	6000 2500 5900 2500
Wire Wire Line
	5900 2600 6000 2600
Wire Wire Line
	4200 2600 4300 2600
Wire Wire Line
	4300 2700 4200 2700
Wire Wire Line
	4600 2600 4700 2600
Wire Wire Line
	4700 2700 4600 2700
Wire Wire Line
	4200 2500 4700 2500
Wire Wire Line
	4200 2500 4200 2400
Wire Wire Line
	4200 3000 4200 2900
Wire Wire Line
	3800 3100 3800 3200
Wire Wire Line
	4700 2850 4700 3050
Connection ~ 4700 2950
Wire Wire Line
	4700 3200 4700 3500
Connection ~ 4700 3300
Connection ~ 4700 3400
Wire Wire Line
	4700 3050 4500 3050
Wire Wire Line
	4500 3450 4500 3350
Wire Wire Line
	6000 2750 5900 2750
Wire Wire Line
	6400 2750 6300 2750
Wire Wire Line
	4600 4550 4600 4450
Wire Wire Line
	4600 4650 4700 4650
Wire Wire Line
	4600 4750 4600 4850
Wire Wire Line
	4100 4650 4000 4650
Wire Wire Line
	4000 4550 4100 4550
Wire Wire Line
	4100 4750 4000 4750
Wire Wire Line
	4700 2000 4700 2100
Wire Wire Line
	4700 2500 4700 2400
$Comp
L ATMEGA328P-M U3
U 1 1 5961371A
P 8400 3450
F 0 "U3" H 7650 4700 50  0000 L BNN
F 1 "ATMEGA328P-M" H 8800 2050 50  0000 L BNN
F 2 "Housings_DFN_QFN:QFN-32-1EP_5x5mm_Pitch0.5mm" H 8500 1900 50  0000 C CIN
F 3 "" H 8400 3450 50  0000 C CNN
	1    8400 3450
	1    0    0    -1  
$EndComp
Text GLabel 9500 4350 2    47   Output ~ 0
PI_PWR
Text GLabel 9500 4450 2    47   Output ~ 0
FPV_PWR
Text GLabel 9500 4650 2    47   Output ~ 0
XBEE_SLEEP
Text GLabel 9500 4550 2    47   Output ~ 0
uMCA_PWR
Text GLabel 9500 3700 2    47   Input ~ 0
GPS_TX
Text GLabel 9500 3600 2    47   Output ~ 0
MOSFET_A
Text GLabel 9500 4050 2    47   Output ~ 0
TX_AVR
Text GLabel 9500 3950 2    47   Input ~ 0
RX_AVR
Text GLabel 9500 2850 2    47   Output ~ 0
SCK
Text GLabel 9500 2650 2    47   BiDi ~ 0
MOSI
Text GLabel 9500 2750 2    47   BiDi ~ 0
MISO
Text GLabel 9500 3500 2    47   Output ~ 0
SCROLL_UP
Text GLabel 9500 2450 2    47   Output ~ 0
TAKE_PICTURE
Text GLabel 9500 3300 2    47   Output ~ 0
SELECT
Text GLabel 9500 3400 2    47   Output ~ 0
SCROLL_DOWN
Text GLabel 9500 2950 2    47   Input ~ 0
uMCA_IDLE
Text GLabel 9500 3050 2    47   Input ~ 0
uMCA_BUSY
Text GLabel 9500 4250 2    47   Output ~ 0
GPS_PWR_CTRL
Text GLabel 9500 3200 2    47   Input ~ 0
BAL_1%2
Text GLabel 7400 3700 0    47   Input ~ 0
BAL_2%4
Text GLabel 7400 3800 0    47   Input ~ 0
BAL_3%6
Wire Wire Line
	9400 4350 9500 4350
Wire Wire Line
	9500 4450 9400 4450
Wire Wire Line
	9400 4650 9500 4650
Wire Wire Line
	9500 4550 9400 4550
Wire Wire Line
	9400 3950 9500 3950
Wire Wire Line
	9500 4050 9400 4050
Wire Wire Line
	9400 3600 9500 3600
Wire Wire Line
	9500 3700 9400 3700
Wire Wire Line
	9500 3500 9400 3500
Wire Wire Line
	9500 2850 9400 2850
Wire Wire Line
	9500 2750 9400 2750
Wire Wire Line
	9400 2650 9500 2650
Wire Wire Line
	9500 3050 9400 3050
Wire Wire Line
	9400 2950 9500 2950
Wire Wire Line
	9500 3300 9400 3300
Wire Wire Line
	9500 3400 9400 3400
Wire Wire Line
	9500 2450 9400 2450
Wire Wire Line
	9500 4250 9400 4250
Wire Wire Line
	9500 3200 9400 3200
Wire Wire Line
	7500 3700 7400 3700
Wire Wire Line
	7400 3800 7500 3800
$Comp
L LED-RESCUE-Aerostat_REV_A D1
U 1 1 59614A2A
P 10100 2350
F 0 "D1" H 10100 2450 50  0000 C CNN
F 1 "LED" H 10100 2250 50  0000 C CNN
F 2 "LEDs:LED_0603" H 10100 2350 50  0001 C CNN
F 3 "" H 10100 2350 50  0000 C CNN
	1    10100 2350
	-1   0    0    1   
$EndComp
$Comp
L R R4
U 1 1 59614ACD
P 9650 2350
F 0 "R4" V 9550 2350 50  0000 C CNN
F 1 "330" V 9650 2350 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 9580 2350 50  0001 C CNN
F 3 "" H 9650 2350 50  0000 C CNN
	1    9650 2350
	0    1    1    0   
$EndComp
Wire Wire Line
	9800 2350 9900 2350
$Comp
L GND #PWR09
U 1 1 59614C3F
P 10300 2450
F 0 "#PWR09" H 10300 2200 50  0001 C CNN
F 1 "GND" H 10300 2300 50  0000 C CNN
F 2 "" H 10300 2450 50  0000 C CNN
F 3 "" H 10300 2450 50  0000 C CNN
	1    10300 2450
	1    0    0    -1  
$EndComp
Wire Wire Line
	10300 2450 10300 2350
Wire Wire Line
	9500 2350 9400 2350
$Comp
L +3.3V #PWR010
U 1 1 59614FB6
P 7500 2250
F 0 "#PWR010" H 7500 2100 50  0001 C CNN
F 1 "+3.3V" H 7500 2390 50  0000 C CNN
F 2 "" H 7500 2250 50  0000 C CNN
F 3 "" H 7500 2250 50  0000 C CNN
	1    7500 2250
	1    0    0    -1  
$EndComp
Wire Wire Line
	7500 2250 7500 2950
Connection ~ 7500 2350
Connection ~ 7500 2450
Connection ~ 7500 2650
Wire Wire Line
	7350 2350 7500 2350
Wire Wire Line
	7500 4450 7500 4750
Connection ~ 7500 4550
$Comp
L GND #PWR011
U 1 1 59615746
P 7500 4750
F 0 "#PWR011" H 7500 4500 50  0001 C CNN
F 1 "GND" H 7500 4600 50  0000 C CNN
F 2 "" H 7500 4750 50  0000 C CNN
F 3 "" H 7500 4750 50  0000 C CNN
	1    7500 4750
	1    0    0    -1  
$EndComp
Connection ~ 7500 4650
Text GLabel 2950 3400 2    47   Input ~ 0
TX_AVR
Text GLabel 2950 3300 2    47   Output ~ 0
RX_AVR
Wire Wire Line
	2850 3300 2950 3300
Wire Wire Line
	2950 3400 2850 3400
Text GLabel 1850 3300 0    47   Output ~ 0
RX_FTDI
Text GLabel 1850 3100 0    47   Input ~ 0
TX_FTDI
Wire Wire Line
	1850 3100 1950 3100
Wire Wire Line
	1850 3300 1950 3300
Text GLabel 1850 3200 0    47   Input ~ 0
TX_XBEE
Wire Wire Line
	1850 3200 1950 3200
Text GLabel 1850 3400 0    47   Input ~ 0
RX_XBEE
Wire Wire Line
	1850 3400 1950 3400
Text Notes 5100 4900 0    47   ~ 0
ICSP, USE ONLY FOR FLASHING\n8MHZ BREADBOARD (INTERNAL CLOCK)\nARDUINO BOOTLOADER. FAILURE TO DO\nSO WILL LOCK THE AVR SINCE\nTHERE IS NO CRYSTAL ON THE PCB.
Text Notes 4700 4150 0    47   ~ 0
FTDI 230X, USB TO SERIAL ADAPTER\nINTERFACES WITH ATMEGA328P\nUSING ARDUINO BOOTLOADER TO\nPROGRAM AND DEBUG OVER SERIAL.
Text Notes 7600 5250 0    47   ~ 0
ATMEGA328P MCU COMMONLY USED IN ARDUINO UNO\nRUNS MODIFIED OPTIBOOT BOOTLOADER AT 8MHZ.
Text GLabel 4200 2400 1    47   Output ~ 0
V_USB
$Comp
L NLAS4684 U1
U 1 1 5A348D25
P 2400 3000
AR Path="/5953DA9E/5A348D25" Ref="U1"  Part="1" 
AR Path="/59542F8A/5A348D25" Ref="U1"  Part="1" 
F 0 "U1" H 2600 3050 47  0000 C CNN
F 1 "NLAS4684" H 2400 2200 47  0000 C CNN
F 2 "Housings_DFN_QFN:DFN-10-1EP_3x3mm_Pitch0.5mm" H 2600 3050 47  0001 C CNN
F 3 "" H 2600 3050 47  0001 C CNN
	1    2400 3000
	1    0    0    -1  
$EndComp
Text GLabel 1850 3650 0    47   Input ~ 0
V_USB
Wire Wire Line
	1850 3650 1950 3650
Wire Wire Line
	1950 3550 1950 3750
$Comp
L R R1
U 1 1 5A3494DE
P 1950 3900
F 0 "R1" H 1850 3900 50  0000 C CNN
F 1 "10K" V 1950 3900 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 1880 3900 50  0001 C CNN
F 3 "" H 1950 3900 50  0000 C CNN
	1    1950 3900
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR013
U 1 1 5A3495CA
P 1950 4150
F 0 "#PWR013" H 1950 3900 50  0001 C CNN
F 1 "GND" H 1950 4000 50  0000 C CNN
F 2 "" H 1950 4150 50  0000 C CNN
F 3 "" H 1950 4150 50  0000 C CNN
	1    1950 4150
	1    0    0    -1  
$EndComp
Wire Wire Line
	1950 4150 1950 4050
Connection ~ 1950 3650
$Comp
L GND #PWR014
U 1 1 5A349906
P 2850 3750
F 0 "#PWR014" H 2850 3500 50  0001 C CNN
F 1 "GND" H 2850 3600 50  0000 C CNN
F 2 "" H 2850 3750 50  0000 C CNN
F 3 "" H 2850 3750 50  0000 C CNN
	1    2850 3750
	1    0    0    -1  
$EndComp
Wire Wire Line
	2850 3750 2850 3650
$Comp
L +3.3V #PWR015
U 1 1 5A349994
P 2850 3000
F 0 "#PWR015" H 2850 2850 50  0001 C CNN
F 1 "+3.3V" H 2850 3140 50  0000 C CNN
F 2 "" H 2850 3000 50  0000 C CNN
F 3 "" H 2850 3000 50  0000 C CNN
	1    2850 3000
	1    0    0    -1  
$EndComp
Wire Wire Line
	2850 3000 2850 3100
$Comp
L C C1
U 1 1 5A349AAA
P 3050 2950
F 0 "C1" H 3075 3050 50  0000 L CNN
F 1 "1uF" H 3075 2850 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 3088 2800 50  0001 C CNN
F 3 "" H 3050 2950 50  0000 C CNN
	1    3050 2950
	1    0    0    -1  
$EndComp
Wire Wire Line
	2850 3100 3050 3100
$Comp
L GND #PWR016
U 1 1 5A349B7C
P 3050 2700
F 0 "#PWR016" H 3050 2450 50  0001 C CNN
F 1 "GND" H 3050 2550 50  0000 C CNN
F 2 "" H 3050 2700 50  0000 C CNN
F 3 "" H 3050 2700 50  0000 C CNN
	1    3050 2700
	-1   0    0    1   
$EndComp
Wire Wire Line
	3050 2700 3050 2800
Text Notes 1450 4800 0    47   ~ 0
ANALOG MUX FOR TOGGLING BETWEEN USB AND XBEE.\nDEFAULTS TO XBEE, SWITCHES TO USB WHEN\nCONNECTED TO USB. LOGIC LEVEL FOR SELECT IS\n0-7 VDC, POWERING MUX AT 3.3V IS A NON ISSUE.
Text GLabel 9500 4150 2    47   Output ~ 0
MOSFET_B
Wire Wire Line
	9500 4150 9400 4150
NoConn ~ 9400 2550
Wire Wire Line
	9500 3800 9400 3800
$EndSCHEMATC
